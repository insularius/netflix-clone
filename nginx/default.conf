# nginx/default.conf

# server {
#     # listen on port 80
#     listen 8080;
#     # save logs here
#     access_log /var/log/nginx/access.log;

#     # where the root here
#     # root /var/www
#     root /usr/src/app/.next/server/app;
    
#     # what file to server as index
#     # index index.html index.htm;
#     index index.html;


#     # location / {
#     #     # First attempt to serve request as file, then
#     #     # as directory, then fall back to redirecting to index.html
#     #     try_files $uri $uri/ /index.html;
#     # }
     
   
#     # location / {
#     #     proxy_pass http://server:3000; 
#     #     proxy_set_header Host $host;
#     #     proxy_set_header X-Real-IP $remote_addr;
#     #     proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
#     # }
# }


# server {
#         # listen on port 80
#         listen 8080;
#         # save logs here
#         access_log /var/log/nginx/access.log compression;

#         # where the root here
#         root /var/www;
#         # what file to server as index
#         index index.html index.htm;

#         location / {
#             # First attempt to serve request as file, then
#             # as directory, then fall back to redirecting to index.html
#             try_files $uri $uri/ /index.html;
#         }
# }



server {
  server_name example.com;
  
  root /var/www/nextjs/.next/server/pages;
  
  location @proxy {
    proxy_pass http://server:3000;
  }

  location / {
    try_files $uri $uri/ $uri/index.html @proxy;
  }

  listen 8080;
}







